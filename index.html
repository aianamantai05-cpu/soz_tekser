<!DOCTYPE html>
<html lang="kk" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SozTekser | Қазақ тіліндегі AI негізіндегі сөз тексеру</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #00695c;
            --primary-dark: #004d40;
            --primary-light: #4db6ac;
            --secondary: #ff6f00;
            --secondary-light: #ffb74d;
            --success: #2e7d32;
            --error: #c62828;
            --warning: #f57c00;
            --bg-primary: #f8fdfb;
            --bg-secondary: #ffffff;
            --text-primary: #1a3c34;
            --text-secondary: #546e7a;
            --border: #e0f2f1;
            --shadow: 0 8px 32px rgba(0, 107, 92, 0.08);
            --shadow-lg: 0 16px 48px rgba(0, 107, 92, 0.12);
            --radius: 16px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        [data-theme="dark"] {
            --primary: #4db6ac;
            --primary-dark: #26a69a;
            --primary-light: #80cbc4;
            --secondary: #ffab40;
            --secondary-light: #ffd180;
            --success: #4caf50;
            --error: #f44336;
            --warning: #ff9800;
            --bg-primary: #0a1f1c;
            --bg-secondary: #132a26;
            --text-primary: #e0f2f1;
            --text-secondary: #b2dfdb;
            --border: #1e3d38;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 16px 48px rgba(0, 0, 0, 0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0a3d2e 0%, #1a6b53 50%, #4db6ac 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            transition: var(--transition);
            position: relative;
        }

        [data-theme="dark"] body {
            background: linear-gradient(135deg, #06231a 0%, #0a3d2e 50%, #1a6b53 100%);
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(77, 182, 172, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 111, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(0, 105, 92, 0.05) 0%, transparent 50%);
            pointer-events: none;
        }

        [data-theme="dark"] body::before {
            background: 
                radial-gradient(circle at 20% 80%, rgba(77, 182, 172, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 171, 64, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(0, 105, 92, 0.03) 0%, transparent 50%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            z-index: 1;
        }

        /* Header Styles */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        [data-theme="dark"] .header {
            background: rgba(19, 42, 38, 0.95);
            border-bottom-color: var(--border);
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-secondary);
            font-weight: 500;
            transition: var(--transition);
            position: relative;
            cursor: pointer;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .nav-links a.active {
            color: var(--primary);
        }

        .nav-links a.active::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--primary);
            border-radius: 2px;
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: var(--transition);
        }

        .theme-toggle:hover {
            color: var(--primary);
            background: var(--border);
        }

        /* Hero Section */
        .hero {
            padding: 4rem 0;
            text-align: center;
            color: white;
            transition: var(--transition);
        }

        [data-theme="dark"] .hero {
            color: var(--text-primary);
        }

        .hero-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 16px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            transition: var(--transition);
        }

        [data-theme="dark"] .hero-badge {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 700;
            line-height: 1.1;
            margin-bottom: 1.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            transition: var(--transition);
        }

        [data-theme="dark"] .hero h1 {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .hero p {
            font-size: 1.25rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 3rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            transition: var(--transition);
        }

        [data-theme="dark"] .hero p {
            color: var(--text-secondary);
        }

        /* Checker Container */
        .checker-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--radius);
            padding: 3rem;
            box-shadow: var(--shadow-lg);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 3rem;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(20px);
            transition: var(--transition);
        }

        [data-theme="dark"] .checker-container {
            background: rgba(19, 42, 38, 0.95);
            border-color: var(--border);
        }

        .checker-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }

        .input-group {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            position: relative;
        }

        .input-wrapper {
            flex: 1;
            position: relative;
        }

        #wordInput {
            width: 100%;
            padding: 1.25rem 1.5rem;
            border: 2px solid var(--border);
            border-radius: var(--radius);
            font-size: 1.1rem;
            background: var(--bg-primary);
            color: var(--text-primary);
            transition: var(--transition);
            font-weight: 500;
        }

        #wordInput:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 105, 92, 0.1);
        }

        #wordInput::placeholder {
            color: var(--text-secondary);
            opacity: 0.7;
        }

        .audio-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .audio-btn {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--secondary), var(--secondary-light));
            color: white;
            border: none;
            border-radius: var(--radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .audio-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 111, 0, 0.3);
        }

        .audio-btn.recording {
            background: linear-gradient(135deg, var(--error), #d32f2f);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        #checkBtn {
            padding: 1.25rem 2.5rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            border-radius: var(--radius);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }

        #checkBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 105, 92, 0.3);
        }

        #checkBtn:active {
            transform: translateY(0);
        }

        #checkBtn.loading {
            pointer-events: none;
            opacity: 0.8;
        }

        #checkBtn.loading i {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Results Area */
        .results {
            min-height: 200px;
            padding: 2rem;
            border-radius: var(--radius);
            background: var(--bg-primary);
            border: 1px solid var(--border);
            transition: var(--transition);
        }

        .results.correct {
            border-color: var(--success);
            background: rgba(46, 125, 50, 0.05);
        }

        .results.incorrect {
            border-color: var(--error);
            background: rgba(198, 40, 40, 0.05);
        }

        [data-theme="dark"] .results.correct {
            background: rgba(76, 175, 80, 0.1);
        }

        [data-theme="dark"] .results.incorrect {
            background: rgba(244, 67, 54, 0.1);
        }

        .result-status {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .result-status.correct {
            color: var(--success);
        }

        .result-status.incorrect {
            color: var(--error);
        }

        .status-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .status-icon.correct {
            background: rgba(46, 125, 50, 0.1);
            color: var(--success);
        }

        .status-icon.incorrect {
            background: rgba(198, 40, 40, 0.1);
            color: var(--error);
        }

        [data-theme="dark"] .status-icon.correct {
            background: rgba(76, 175, 80, 0.2);
        }

        [data-theme="dark"] .status-icon.incorrect {
            background: rgba(244, 67, 54, 0.2);
        }

        .suggestions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .suggestion {
            background: var(--bg-secondary);
            padding: 1.25rem;
            border-radius: var(--radius);
            border: 1px solid var(--border);
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .suggestion::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transform: scaleX(0);
            transition: var(--transition);
        }

        .suggestion:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow);
        }

        .suggestion:hover::before {
            transform: scaleX(1);
        }

        .suggestion-word {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .similarity {
            font-size: 0.9rem;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }

        .similarity-bar {
            width: 60px;
            height: 4px;
            background: var(--border);
            border-radius: 2px;
            overflow: hidden;
        }

        .similarity-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 2px;
            transition: width 0.5s ease;
        }

        .audio-suggestion-btn {
            background: none;
            border: none;
            color: var(--primary);
            cursor: pointer;
            padding: 4px;
            border-radius: 50%;
            transition: var(--transition);
        }

        .audio-suggestion-btn:hover {
            background: var(--border);
            transform: scale(1.1);
        }

        /* Dictionary Info */
        .dictionary-info {
            background: rgba(255, 255, 255, 0.9);
            padding: 2rem;
            border-radius: var(--radius);
            margin: 2rem auto;
            max-width: 800px;
            text-align: center;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            backdrop-filter: blur(10px);
            transition: var(--transition);
        }

        [data-theme="dark"] .dictionary-info {
            background: rgba(19, 42, 38, 0.9);
        }

        .dictionary-info h3 {
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .dictionary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .stat-item {
            background: var(--bg-primary);
            padding: 1rem;
            border-radius: var(--radius);
            border: 1px solid var(--border);
            transition: var(--transition);
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Features Section */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 4rem 0;
        }

        .feature {
            background: rgba(255, 255, 255, 0.9);
            padding: 2.5rem 2rem;
            border-radius: var(--radius);
            text-align: center;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        [data-theme="dark"] .feature {
            background: rgba(19, 42, 38, 0.9);
            border-color: var(--border);
        }

        .feature::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transform: scaleX(0);
            transition: var(--transition);
        }

        .feature:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
        }

        .feature:hover::before {
            transform: scaleX(1);
        }

        .feature-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 1.5rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
        }

        .feature h3 {
            margin-bottom: 1rem;
            color: var(--text-primary);
            font-weight: 600;
        }

        .feature p {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Algorithm Section */
        .visualization {
            background: rgba(255, 255, 255, 0.9);
            border-radius: var(--radius);
            padding: 2rem;
            margin: 3rem 0;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            backdrop-filter: blur(10px);
            transition: var(--transition);
        }

        [data-theme="dark"] .visualization {
            background: rgba(19, 42, 38, 0.9);
        }

        .visualization h3 {
            margin-bottom: 1.5rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .algorithm-demo {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            align-items: center;
        }

        .demo-text {
            font-size: 1.1rem;
            line-height: 1.7;
            color: var(--text-secondary);
        }

        .algorithm-example {
            background: var(--bg-primary);
            padding: 1rem;
            border-radius: var(--radius);
            margin-top: 1rem;
            border: 1px solid var(--border);
        }

        .demo-visual {
            background: var(--bg-primary);
            padding: 2rem;
            border-radius: var(--radius);
            border: 1px solid var(--border);
        }

        .word-comparison {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .word-box {
            text-align: center;
        }

        .word-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .word-display {
            font-size: 2rem;
            font-weight: 700;
            padding: 1rem;
            border-radius: var(--radius);
            background: var(--bg-secondary);
            border: 2px solid var(--border);
            min-width: 120px;
        }

        .distance-indicator {
            text-align: center;
            margin: 1rem 0;
        }

        .distance-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            margin: 1rem 0;
        }

        .distance-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .steps {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .step {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--border);
            transition: var(--transition);
        }

        .step.active {
            background: var(--primary);
            transform: scale(1.2);
        }

        /* New Features Section - IMPLEMENTED */
        .new-features {
            background: rgba(255, 255, 255, 0.9);
            padding: 4rem 0;
            margin: 4rem 0;
            transition: var(--transition);
        }

        [data-theme="dark"] .new-features {
            background: rgba(19, 42, 38, 0.9);
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .feature-card {
            background: var(--bg-secondary);
            padding: 2rem;
            border-radius: var(--radius);
            border: 1px solid var(--border);
            transition: var(--transition);
            text-align: center;
            cursor: pointer;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .feature-card i {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .feature-card h4 {
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .feature-card p {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* History Panel */
        .history-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--radius);
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            backdrop-filter: blur(10px);
            transition: var(--transition);
        }

        [data-theme="dark"] .history-panel {
            background: rgba(19, 42, 38, 0.95);
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .history-header h3 {
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .history-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            transition: var(--transition);
        }

        .history-item:hover {
            background: var(--bg-primary);
        }

        .history-word {
            font-weight: 600;
            color: var(--text-primary);
        }

        .history-status {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .history-correct {
            color: var(--success);
        }

        .history-incorrect {
            color: var(--error);
        }

        .history-time {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Statistics Panel */
        .stats-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--radius);
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            backdrop-filter: blur(10px);
            transition: var(--transition);
        }

        [data-theme="dark"] .stats-panel {
            background: rgba(19, 42, 38, 0.95);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .stat-card {
            background: var(--bg-primary);
            padding: 1.5rem;
            border-radius: var(--radius);
            border: 1px solid var(--border);
            text-align: center;
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .stat-card i {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .stat-card .number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .stat-card .label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Export Panel */
        .export-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--radius);
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            backdrop-filter: blur(10px);
            transition: var(--transition);
        }

        [data-theme="dark"] .export-panel {
            background: rgba(19, 42, 38, 0.95);
        }

        .export-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .export-btn {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            border-radius: var(--radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 105, 92, 0.3);
        }

        .export-btn.json {
            background: linear-gradient(135deg, #ff6f00, #ffb74d);
        }

        /* Footer */
        .footer {
            background: rgba(10, 61, 46, 0.9);
            color: white;
            padding: 3rem 0;
            margin-top: 4rem;
            backdrop-filter: blur(10px);
            transition: var(--transition);
        }

        [data-theme="dark"] .footer {
            background: rgba(6, 35, 26, 0.9);
        }

        .footer-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 3rem;
            align-items: start;
        }

        .footer-section h4 {
            margin-bottom: 1.5rem;
            color: var(--primary-light);
            font-size: 1.5rem;
        }

        .footer-section p {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .dictionary-source {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: var(--radius);
            margin-top: 1rem;
        }

        .dictionary-source h5 {
            color: var(--secondary-light);
            margin-bottom: 0.5rem;
        }

        .dictionary-source p {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.4;
        }

        .footer-bottom {
            text-align: center;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.7);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .input-group {
                flex-direction: column;
            }
            
            .audio-controls {
                flex-direction: column;
            }
            
            .algorithm-demo {
                grid-template-columns: 1fr;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
            }
            
            .nav-links {
                gap: 1rem;
            }
        }

        /* Loading Animation */
        .loading-dots {
            display: inline-flex;
            gap: 4px;
        }

        .loading-dots span {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--primary);
            animation: bounce 1.4s ease-in-out infinite both;
        }

        .loading-dots span:nth-child(1) { animation-delay: -0.32s; }
        .loading-dots span:nth-child(2) { animation-delay: -0.16s; }

        @keyframes bounce {
            0%, 80%, 100% {
                transform: scale(0);
            }
            40% {
                transform: scale(1);
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <nav class="nav">
                <a href="#" class="logo">
                    <div class="logo-icon">S</div>
                    SozTekser
                </a>
                <div class="nav-links">
                    <a href="#" class="nav-link active" data-target="hero">Басты</a>
                    <a href="#algorithm" class="nav-link" data-target="algorithm">Алгоритм</a>
                    <a href="#features" class="nav-link" data-target="features">Мүмкіндіктер</a>
                    <a href="#new-features" class="nav-link" data-target="new-features">Жаңа Әзірлемелер</a>
                    <button class="theme-toggle" id="themeToggle">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <section class="hero" id="hero">
            <div class="container">
                <div class="hero-content">
                    <div class="hero-badge">
                        <i class="fas fa-robot"></i>
                        Жасанды Интеллект Негізіндегі Сөз Тексеру
                    </div>
                    <h1>Қазақ Тіліндегі Сөз Дұрыстығын Тексеру</h1>
                    <p>AI технологиясы арқылы қазақ тіліндегі сөздерді тексеріңіз, қателерді түзетіңіз және тілді меңгеруді жақсартыңыз</p>
                    
                    <div class="checker-container">
                        <!-- Audio Controls -->
                        <div class="audio-controls">
                            <button class="audio-btn" id="speakBtn">
                                <i class="fas fa-microphone"></i>
                                Сөзді айтып беру
                            </button>
                            <button class="audio-btn" id="listenBtn">
                                <i class="fas fa-ear-listen"></i>
                                Дауысты тану
                            </button>
                        </div>

                        <div class="input-group">
                            <div class="input-wrapper">
                                <input type="text" id="wordInput" placeholder="Сөзді енгізіңіз (мысалы: алма, кітап, оқу...)">
                            </div>
                            <button id="checkBtn">
                                <i class="fas fa-search"></i>
                                Тексеру
                            </button>
                        </div>
                        <div class="results" id="results">
                            <div style="text-align: center; color: var(--text-secondary); opacity: 0.7;">
                                <i class="fas fa-arrow-up" style="font-size: 2rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                                <p>Сөзді енгізіп, "Тексеру" батырмасын басыңыз</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dictionary Info -->
        <section class="dictionary-info">
            <div class="container">
                <h3><i class="fas fa-book"></i> Сөздік Ақпараты</h3>
                <div class="dictionary-stats">
                    <div class="stat-item">
                        <div class="stat-number" id="totalWords">0</div>
                        <div class="stat-label">Жалпы сөздер</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="uniqueWords">0</div>
                        <div class="stat-label">Бірегей сөздер</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="avgLength">0</div>
                        <div class="stat-label">Орташа ұзындығы</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Algorithm Section -->
        <section class="visualization" id="algorithm">
            <div class="container">
                <h3><i class="fas fa-brain"></i> Алгоритм Қалай Жұмыс Істейді?</h3>
                <div class="algorithm-demo">
                    <div class="demo-text">
                        <p><strong>Левенштейн Қашықтығы</strong> - бұл екі сөз арасындағы өзгерістер санын есептейтін алгоритм.</p>
                        <p>Әрбір әрекет (әріп қосу, жою немесе ауыстыру) +1 ұпай ретінде саналады.</p>
                        <p>Алгоритм ең төменгі ұпай саны бар сөздерді ұсынады, яғни олар бастапқы сөзге ең ұқсас.</p>
                        <div class="algorithm-example">
                            <p><strong>Мысал:</strong> "қалам" → "қалам" (0 өзгеріс)</p>
                            <p>"қалам" → "қаламдар" (4 өзгеріс)</p>
                        </div>
                    </div>
                    <div class="demo-visual">
                        <div class="word-comparison">
                            <div class="word-box">
                                <div class="word-label">Сіз енгіздіңіз</div>
                                <div class="word-display" id="demoInput">қалам</div>
                            </div>
                            <div class="word-box">
                                <div class="word-label">Ұсыныс</div>
                                <div class="word-display" id="demoSuggestion">қалам</div>
                            </div>
                        </div>
                        <div class="distance-indicator">
                            <div class="distance-label">Левенштейн Қашықтығы</div>
                            <div class="distance-value" id="demoDistance">0</div>
                            <div class="distance-label">Өзгерістер саны</div>
                        </div>
                        <div class="steps">
                            <div class="step active"></div>
                            <div class="step"></div>
                            <div class="step"></div>
                            <div class="step"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features -->
        <section class="features" id="features">
            <div class="container">
                <div class="feature">
                    <div class="feature-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3>Жылдам Тексеру</h3>
                    <p>Сөздерді лездетіп тексеріп, нақты нәтижелерді бірден алыңыз. AI технологиясының күшімен жұмыс істейді.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <h3>Ақылды Ұсыныстар</h3>
                    <p>Қателессеңіз, ең ұқсас 3 нұсқаны дәлдік пайызымен көрсетеміз. Әр ұсыныстың неге таңдалғанын түсінесіз.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <h3>Білім Беру</h3>
                    <p>Жасанды интеллект қалай жұмыс істейтінін көріп, түсінесіз. Алгоритмнің жұмыс принциптерін визуалды түрде бақылаңыз.</p>
                </div>
            </div>
        </section>

        <!-- New Features Section - IMPLEMENTED -->
        <section class="new-features" id="new-features">
            <div class="container">
                <h3 style="text-align: center; margin-bottom: 2rem; color: var(--primary);">
                    <i class="fas fa-star"></i> Жаңа Әзірлемелер
                </h3>
                <div class="feature-grid">
                    <div class="feature-card" onclick="showHistory()">
                        <i class="fas fa-history"></i>
                        <h4>Тарих Журналы</h4>
                        <p>Соңғы тексерілген сөздердің тізімі, оларды қайта тексеру мүмкіндігі</p>
                    </div>
                    <div class="feature-card" onclick="showStatistics()">
                        <i class="fas fa-chart-line"></i>
                        <h4>Статистика</h4>
                        <p>Тексерулер статистикасы, ең көп қателесілетін сөздердің тізімі</p>
                    </div>
                    <div class="feature-card" onclick="showExport()">
                        <i class="fas fa-download"></i>
                        <h4>Нәтижелерді Жүктеу</h4>
                        <p>Тексеру нәтижелерін TXT немесе JSON форматта жүктеу мүмкіндігі</p>
                    </div>
                </div>

                <!-- History Panel -->
                <div class="history-panel" id="historyPanel" style="display: none;">
                    <div class="history-header">
                        <h3><i class="fas fa-history"></i> Соңғы Тексерілген Сөздер</h3>
                        <button class="audio-btn" onclick="clearHistory()" style="padding: 0.5rem 1rem;">
                            <i class="fas fa-trash"></i>
                            Тазарту
                        </button>
                    </div>
                    <div class="history-list" id="historyList">
                        <!-- History items will be added here -->
                    </div>
                </div>

                <!-- Statistics Panel -->
                <div class="stats-panel" id="statsPanel" style="display: none;">
                    <h3><i class="fas fa-chart-line"></i> Тексеру Статистикасы</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <i class="fas fa-check-circle"></i>
                            <div class="number" id="statsCorrect">0</div>
                            <div class="label">Дұрыс сөздер</div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-times-circle"></i>
                            <div class="number" id="statsIncorrect">0</div>
                            <div class="label">Қате сөздер</div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-search"></i>
                            <div class="number" id="statsTotal">0</div>
                            <div class="label">Жалпы тексерулер</div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-percentage"></i>
                            <div class="number" id="statsAccuracy">0%</div>
                            <div class="label">Дәлдік пайызы</div>
                        </div>
                    </div>
                </div>

                <!-- Export Panel -->
                <div class="export-panel" id="exportPanel" style="display: none;">
                    <h3><i class="fas fa-download"></i> Нәтижелерді Жүктеу</h3>
                    <div class="export-options">
                        <button class="export-btn" onclick="exportToJSON()">
                            <i class="fas fa-file-code"></i>
                            JSON ретінде жүктеу
                        </button>
                        <button class="export-btn json" onclick="exportToTXT()">
                            <i class="fas fa-file-alt"></i>
                            TXT ретінде жүктеу
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer" id="about">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>SozTekser</h4>
                    <p>Қазақ тілін цифрлық кеңістікте дамытуға арналған заманауи құрал. AI технологиясы мен лингвистиканың үйлесімі.</p>
                    <p>Бұл жоба қазақ тілінің орфографиясын тексеруге арналған жасанды интеллект негізіндегі шешім.</p>
                    
                    <div class="dictionary-source">
                        <h5>Дереккөзі:</h5>
                        <p>Орфографиялық сөздік / құрастырушылар Н. Уәли, Қ. Күдеринова, А. Фазылжанова, Ж. Исаева, Н. Әміржанова, А. Әмірбекова</p>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Жоба туралы</h4>
                    <p>SozTekser - бұл қазақ тіліндегі сөздерді тексеруге арналған AI негізіндегі платформа. Левенштейн алгоритмі арқылы дәлдік пен жылдамдықты қамтамасыз етеді.</p>
                    <p><strong>AI Агенті:</strong> Иә, біз жасанды интеллект алгоритмдерін (Левенштейн қашықтығы) пайдаланамыз!</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 SozTekser. Қазақ тілінің цифрлық дамуына үлес қосу мақсатында жасалған.</p>
            </div>
        </div>
    </footer>

    <script>
        // Global variables
        let kazakhDictionary = [];
        let dictionaryLoaded = false;
        let recognition = null;
        let isListening = false;
        let wordHistory = [];
        let stats = {
            total: 0,
            correct: 0,
            incorrect: 0
        };

        // Theme Toggle
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = themeToggle.querySelector('i');
        
        themeToggle.addEventListener('click', () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            themeIcon.className = newTheme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
            
            localStorage.setItem('theme', newTheme);
        });

        // Load saved theme
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        themeIcon.className = savedTheme === 'light' ? 'fas fa-moon' : 'fas fa-sun';

        // Navigation highlighting
        function updateActiveNavLink() {
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.nav-link');
            
            let currentSection = '';
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                const sectionHeight = section.clientHeight;
                if (window.scrollY >= sectionTop && window.scrollY < sectionTop + sectionHeight) {
                    currentSection = section.id;
                }
            });
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('data-target') === currentSection) {
                    link.classList.add('active');
                }
            });
            
            // If no section is active, make the first nav link active
            if (!currentSection && window.scrollY < 100) {
                navLinks[0].classList.add('active');
            }
        }

        // Scroll to section
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('data-target');
                const targetSection = document.getElementById(targetId);
                
                if (targetSection) {
                    window.scrollTo({
                        top: targetSection.offsetTop - 80,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // New Features Functions
        function showHistory() {
            hideAllPanels();
            document.getElementById('historyPanel').style.display = 'block';
            updateHistoryDisplay();
        }

        function showStatistics() {
            hideAllPanels();
            document.getElementById('statsPanel').style.display = 'block';
            updateStatistics();
        }

        function showExport() {
            hideAllPanels();
            document.getElementById('exportPanel').style.display = 'block';
        }

        function hideAllPanels() {
            document.getElementById('historyPanel').style.display = 'none';
            document.getElementById('statsPanel').style.display = 'none';
            document.getElementById('exportPanel').style.display = 'none';
        }

        function updateHistoryDisplay() {
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = '';

            if (wordHistory.length === 0) {
                historyList.innerHTML = '<p style="text-align: center; color: var(--text-secondary);">Әлі ешқандай сөз тексерілмеген</p>';
                return;
            }

            wordHistory.forEach((item, index) => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.innerHTML = `
                    <div class="history-word">${item.word}</div>
                    <div class="history-status">
                        <span class="${item.isCorrect ? 'history-correct' : 'history-incorrect'}">
                            <i class="fas fa-${item.isCorrect ? 'check' : 'times'}"></i>
                            ${item.isCorrect ? 'Дұрыс' : 'Қате'}
                        </span>
                        <span class="history-time">${item.timestamp}</span>
                        <button class="audio-suggestion-btn" onclick="recheckWord('${item.word}')" title="Қайта тексеру">
                            <i class="fas fa-redo"></i>
                        </button>
                    </div>
                `;
                historyList.appendChild(historyItem);
            });
        }

        function updateStatistics() {
            document.getElementById('statsTotal').textContent = stats.total;
            document.getElementById('statsCorrect').textContent = stats.correct;
            document.getElementById('statsIncorrect').textContent = stats.incorrect;
            
            const accuracy = stats.total > 0 ? Math.round((stats.correct / stats.total) * 100) : 0;
            document.getElementById('statsAccuracy').textContent = accuracy + '%';
        }

        function clearHistory() {
            wordHistory = [];
            stats = {
                total: 0,
                correct: 0,
                incorrect: 0
            };
            updateHistoryDisplay();
            updateStatistics();
        }

        function recheckWord(word) {
            document.getElementById('wordInput').value = word;
            checkWord();
        }

        function exportToJSON() {
            const data = {
                statistics: stats,
                history: wordHistory,
                dictionaryInfo: {
                    totalWords: kazakhDictionary.length,
                    uniqueWords: new Set(kazakhDictionary).size,
                    timestamp: new Date().toISOString()
                }
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `soz-tekser-results-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function exportToTXT() {
            let txtContent = 'SozTekser - Тексеру Нәтижелері\n';
            txtContent += '================================\n\n';
            
            txtContent += `Жалпы тексерулер: ${stats.total}\n`;
            txtContent += `Дұрыс сөздер: ${stats.correct}\n`;
            txtContent += `Қате сөздер: ${stats.incorrect}\n`;
            txtContent += `Дәлдік пайызы: ${stats.total > 0 ? Math.round((stats.correct / stats.total) * 100) : 0}%\n\n`;
            
            txtContent += 'Соңғы Тексерілген Сөздер:\n';
            txtContent += '----------------------------\n';
            
            wordHistory.forEach(item => {
                txtContent += `${item.word} - ${item.isCorrect ? 'Дұрыс' : 'Қате'} - ${item.timestamp}\n`;
            });
            
            txtContent += '\nСөздік Ақпараты:\n';
            txtContent += '-----------------\n';
            txtContent += `Жалпы сөздер: ${kazakhDictionary.length}\n`;
            txtContent += `Бірегей сөздер: ${new Set(kazakhDictionary).size}\n`;
            txtContent += `Орташа ұзындығы: ${Math.round(kazakhDictionary.reduce((sum, word) => sum + word.length, 0) / kazakhDictionary.length)}\n`;
            
            const blob = new Blob([txtContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `soz-tekser-results-${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Speech Synthesis
        function speakWord(word) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'kk-KZ';
                utterance.rate = 0.8;
                speechSynthesis.speak(utterance);
            } else {
                alert('Браузеріңіз дауысты қолдамайды');
            }
        }

        // Speech Recognition
        function setupSpeechRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'kk-KZ';

                recognition.onstart = function() {
                    isListening = true;
                    document.getElementById('listenBtn').classList.add('recording');
                    document.getElementById('listenBtn').innerHTML = '<i class="fas fa-stop"></i> Тоқтату';
                };

                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('wordInput').value = transcript;
                    checkWord();
                };

                recognition.onend = function() {
                    isListening = false;
                    document.getElementById('listenBtn').classList.remove('recording');
                    document.getElementById('listenBtn').innerHTML = '<i class="fas fa-ear-listen"></i> Дауысты тану';
                };

                recognition.onerror = function(event) {
                    console.error('Speech recognition error:', event.error);
                    isListening = false;
                    document.getElementById('listenBtn').classList.remove('recording');
                    document.getElementById('listenBtn').innerHTML = '<i class="fas fa-ear-listen"></i> Дауысты тану';
                    alert('Дауысты тану сәтсіз аяқталды: ' + event.error);
                };
            } else {
                alert('Браузеріңіз дауысты тануды қолдамайды');
            }
        }

      // Load Dictionary Function - Updated for your JSON file
async function loadDictionary() {
    try {
        const response = await fetch('dictionary.json');
        
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const data = await response.json();
        
        // Handle different JSON formats
        if (Array.isArray(data)) {
            kazakhDictionary = data;
        } else if (typeof data === 'object' && data.words) {
            kazakhDictionary = data.words;
        } else if (typeof data === 'object') {
            // If it's an object with word keys
            kazakhDictionary = Object.keys(data);
        } else {
            throw new Error('Белгісіз сөздік формат');
        }
        
        dictionaryLoaded = true;
        updateDictionaryStats();
        
        console.log('Dictionary loaded successfully:', kazakhDictionary.length, 'words');
        
    } catch (error) {
        console.error('Error loading dictionary:', error);
        
        // Fallback to basic dictionary if file not found
        kazakhDictionary = [
            'алма', 'әке', 'шеше', 'бала', 'мектеп', 'кітап', 'қалам', 'дәптер',
            'оқу', 'жазу', 'есеп', 'сабақ', 'мұғалім', 'оқушы', 'сынып', 'зал'
        ];
        
        dictionaryLoaded = true;
        updateDictionaryStats();
        
        console.log('Using fallback dictionary:', kazakhDictionary.length, 'words');
        alert('Сөздік файлы жүктелмеді. Негізгі сөздік пайдаланылуда.');
    }
}
        // Update dictionary statistics
        function updateDictionaryStats() {
            const totalWords = kazakhDictionary.length;
            const uniqueWords = new Set(kazakhDictionary).size;
            const avgLength = Math.round(kazakhDictionary.reduce((sum, word) => sum + word.length, 0) / totalWords);
            
            document.getElementById('totalWords').textContent = totalWords.toLocaleString();
            document.getElementById('uniqueWords').textContent = uniqueWords.toLocaleString();
            document.getElementById('avgLength').textContent = avgLength;
        }

        // Add to history and update stats
        function addToHistory(word, isCorrect, suggestions) {
            wordHistory.unshift({
                word: word,
                isCorrect: isCorrect,
                suggestions: suggestions,
                timestamp: new Date().toLocaleTimeString()
            });
            
            if (wordHistory.length > 10) wordHistory.pop();
            
            // Update statistics
            stats.total++;
            if (isCorrect) {
                stats.correct++;
            } else {
                stats.incorrect++;
            }
        }

        // Levenshtein Distance Algorithm
        function levenshteinDistance(a, b) {
            const matrix = [];
            for (let i = 0; i <= b.length; i++) {
                matrix[i] = [i];
            }
            for (let j = 0; j <= a.length; j++) {
                matrix[0][j] = j;
            }
            for (let i = 1; i <= b.length; i++) {
                for (let j = 1; j <= a.length; j++) {
                    if (b.charAt(i - 1) === a.charAt(j - 1)) {
                        matrix[i][j] = matrix[i - 1][j - 1];
                    } else {
                        matrix[i][j] = Math.min(
                            matrix[i - 1][j - 1] + 1,
                            matrix[i][j - 1] + 1,
                            matrix[i - 1][j] + 1
                        );
                    }
                }
            }
            return matrix[b.length][a.length];
        }

        function calculateSimilarity(distance, maxLength) {
            if (maxLength === 0) return 100;
            return Math.max(0, 100 - (distance / maxLength) * 100);
        }

        function findSuggestions(word) {
            if (!dictionaryLoaded || kazakhDictionary.length === 0) {
                return [];
            }
            
            const suggestions = [];
            
            kazakhDictionary.forEach(dictWord => {
                const distance = levenshteinDistance(word.toLowerCase(), dictWord.toLowerCase());
                const maxLength = Math.max(word.length, dictWord.length);
                const similarity = calculateSimilarity(distance, maxLength);
                
                if (similarity > 20) {
                    suggestions.push({
                        word: dictWord,
                        distance: distance,
                        similarity: Math.round(similarity)
                    });
                }
            });
            
            return suggestions.sort((a, b) => b.similarity - a.similarity).slice(0, 3);
        }

        function checkWord() {
            if (!dictionaryLoaded) {
                alert('Сөздік әлі жүктелмеді. Күте тұрыңыз...');
                return;
            }
            
            const wordInput = document.getElementById('wordInput');
            const resultsDiv = document.getElementById('results');
            const checkBtn = document.getElementById('checkBtn');
            const word = wordInput.value.trim();
            
            if (!word) {
                resultsDiv.innerHTML = `
                    <div class="result-status incorrect">
                        <div class="status-icon incorrect">
                            <i class="fas fa-exclamation-circle"></i>
                        </div>
                        Сөз енгізіңіз!
                    </div>
                `;
                resultsDiv.className = 'results incorrect';
                return;
            }
            
            checkBtn.classList.add('loading');
            checkBtn.innerHTML = '<i class="fas fa-spinner"></i> Тексеру...';
            resultsDiv.innerHTML = `
                <div style="text-align: center; padding: 2rem;">
                    <div class="loading-dots">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <p style="margin-top: 1rem; color: var(--text-secondary);">Сөз тексерілуде...</p>
                </div>
            `;
            
            setTimeout(() => {
                checkBtn.classList.remove('loading');
                checkBtn.innerHTML = '<i class="fas fa-search"></i> Тексеру';
                
                const isCorrect = kazakhDictionary.some(dictWord => 
                    dictWord.toLowerCase() === word.toLowerCase()
                );
                const suggestions = findSuggestions(word);
                
                addToHistory(word, isCorrect, suggestions);
                
                if (isCorrect) {
                    resultsDiv.innerHTML = `
                        <div class="result-status correct">
                            <div class="status-icon correct">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            "✅ ${word}" дұрыс жазылған!
                        </div>
                        <p style="color: var(--text-secondary); margin-top: 1rem;">
                            <i class="fas fa-info-circle"></i> Сіздің сөзіңіз қазақ тілінің сөздігінде бар.
                        </p>
                        <button class="audio-btn" onclick="speakWord('${word}')" style="margin-top: 1rem;">
                            <i class="fas fa-volume-up"></i>
                            Сөзді тыңдау
                        </button>
                    `;
                    resultsDiv.className = 'results correct';
                } else {
                    let suggestionsHTML = '';
                    if (suggestions.length > 0) {
                        suggestionsHTML = `
                            <div style="margin-top: 1.5rem;">
                                <p style="margin-bottom: 1rem; font-weight: 500;">Мүмкін сіз мына сөздерді жазғыңыз келген:</p>
                                <div class="suggestions">
                                    ${suggestions.map(sugg => `
                                        <div class="suggestion">
                                            <div class="suggestion-word">
                                                ${sugg.word}
                                                <button class="audio-suggestion-btn" onclick="speakWord('${sugg.word}')" title="Тыңдау">
                                                    <i class="fas fa-volume-up"></i>
                                                </button>
                                            </div>
                                            <div class="similarity">
                                                <div class="similarity-bar">
                                                    <div class="similarity-fill" style="width: ${sugg.similarity}%"></div>
                                                </div>
                                                ${sugg.similarity}% сәйкес
                                            </div>
                                            <button onclick="document.getElementById('wordInput').value='${sugg.word}'; checkWord();" 
                                                    style="margin-top: 0.5rem; padding: 0.5rem 1rem; background: var(--primary); color: white; border: none; border-radius: 6px; cursor: pointer; width: 100%;">
                                                Таңдау
                                            </button>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        `;
                    } else {
                        suggestionsHTML = `
                            <div style="margin-top: 1.5rem;">
                                <p style="color: var(--text-secondary);">
                                    <i class="fas fa-info-circle"></i> Ешқандай ұсыныс табылған жоқ. Сөзді басқаша енгізіп көріңіз.
                                </p>
                            </div>
                        `;
                    }
                    
                    resultsDiv.innerHTML = `
                        <div class="result-status incorrect">
                            <div class="status-icon incorrect">
                                <i class="fas fa-times-circle"></i>
                            </div>
                            "❌ ${word}" сөзі дұрыс емес сияқты
                        </div>
                        ${suggestionsHTML}
                    `;
                    resultsDiv.className = 'results incorrect';
                }
                
                updateAlgorithmDemo(word, suggestions[0]);
            }, 800);
        }

        function updateAlgorithmDemo(inputWord, suggestion) {
            const demoInput = document.getElementById('demoInput');
            const demoSuggestion = document.getElementById('demoSuggestion');
            const demoDistance = document.getElementById('demoDistance');
            
            if (suggestion) {
                demoInput.textContent = inputWord;
                demoSuggestion.textContent = suggestion.word;
                demoDistance.textContent = suggestion.distance;
                
                const steps = document.querySelectorAll('.step');
                steps.forEach((step, index) => {
                    setTimeout(() => {
                        steps.forEach(s => s.classList.remove('active'));
                        step.classList.add('active');
                    }, index * 500);
                });
            }
        }

        // Event listeners
        document.getElementById('checkBtn').addEventListener('click', checkWord);
        document.getElementById('wordInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkWord();
            }
        });

        document.getElementById('speakBtn').addEventListener('click', function() {
            const word = document.getElementById('wordInput').value.trim();
            if (word) {
                speakWord(word);
            } else {
                alert('Айту үшін сөз енгізіңіз');
            }
        });

        document.getElementById('listenBtn').addEventListener('click', function() {
            if (!isListening) {
                if (recognition) {
                    recognition.start();
                } else {
                    setupSpeechRecognition();
                    setTimeout(() => recognition.start(), 100);
                }
            } else {
                recognition.stop();
            }
        });

        // Initialize
        window.addEventListener('load', () => {
            loadDictionary();
            setupSpeechRecognition();
            
            // Set up scroll event listener for navigation highlighting
            window.addEventListener('scroll', updateActiveNavLink);
            
            // Initialize active nav link
            updateActiveNavLink();
        });
    </script>
</body>
</html>